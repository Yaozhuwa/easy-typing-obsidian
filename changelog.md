## 更新日志 Changelog
- V5.5.11 2024-12-20
  - 基础编辑增强：支持粘贴多行内容到列表或者引用块时，自动添加列表或者引用前缀 #262, #263
  - 基础编辑增强：支持粘贴多级列表项内容到列表
  - 修复：修复 CMD+Enter 新建多级引用行时错误添加空格的问题
  - Enhanced basic editing: Automatically add list or quote prefixes when pasting multiple lines of content into lists or quote blocks #262, #263
  - Enhanced basic editing: Support pasting multi-level list items into lists
  - Fix: Fixed the issue of incorrectly adding spaces when creating multi-level quote lines with CMD+Enter
  
  ![](/assets/enhance-paste.gif)

- V5.5.10 2024-12-01
  - CMD/Ctrl+A 增强功能支持quote/callout，第一次选中当前引用行内容，第二次选中当前的整个引用 #260
  - 切换代码块注释命令
    - 修复对 CSS 代码块注释错误的问题 #259
    - 增加了对 HTML、Markdown、Matlab 代码块注释的支持
    - 优化该命令在空的代码行的表现
  - 修复 MD 链接内部有小括号时会被错误格式化的问题 #178
  - Enhanced functionality for CMD/Ctrl+A to support quote/callout, the first press selects the current quote line content, the second press selects the entire current quote #260
  - Toggle code block comment command
    - Fixed the issue of incorrect comments in CSS code blocks #259
    - Added support for comments in HTML, Markdown, and Matlab code blocks
    - Optimized the performance of this command on empty code lines
  - Fixed the issue where MD links with parentheses inside would be incorrectly formatted #178
- V5.5.9 2024-11-23
  - 严格换行模式支持三种模式（两次换行，两次空格+换行，混合模式）#193
    - 双空格模式：回车会变成两次空格+换行
    - 混合模式是在引用块中使用两次空格+换行，在其他地方使用两次换行
  - 修复了列表中代码块结尾回车时，触发两次换行的问题
  - 增加了选中当前文本块的快捷键命令 #256
  - 修改了选中文本块的逻辑，目前不需要严格换行模式也把相邻的文本行作为同一文本块的内容 #255。
- V5.5.8 2024-11-19
  - 紧急修复上次更新导致的一个输入问题
  - Urgently fixed an input issue caused by the last update
- V5.5.7 2024-11-19
  - 严格换行两次支持 quote 块 #254
  - 增加了引用符号 > 与文本之间自动空格的功能，默认开启，可以在设置中关闭
  - 优化了在基础输入增强中，在句首输入 》或者 > 的行为
  - Added support for strict line breaks twice in quote blocks #254
  - Added the function of automatically inserting a space between the quote symbol > and the text, enabled by default, can be turned off in the settings
  - Optimized the behavior of inputting 》or > at the beginning of a sentence in basic input enhancement
- V5.5.6 2024-11-14
  - 增加了 Ctrl/Cmd+A 增强功能，第一次选中当前行，第二次选中当前文本块，第三次选中全文 #255
    - (目前仅在纯文本块中生效，不包括引用和列表)
    - 需要再设置-实验性功能中打开该功能选项后生效
  - Added enhanced functionality for Ctrl/Cmd+A: the first press selects the current line, the second press selects the current text block, and the third press selects the entire text #255
    - (Currently only effective in plain text blocks, excluding quotes and lists)
    - Need to open the option in the Experimental Features settings to take effect
- V5.5.5 2024-11-03
  - 优化了列表下代码块内空行时 Enter 的处理
  - 跳转到新建行功能支持 Task
  - 优化 Ctrl/Cmd+A 选中代码块的功能，第一次会选中代码内容，第二次会选中整个代码块（包含 \`\`\`）
  - 修复了 Debug 信息的输出
  - Optimized the handling of Enter in code blocks under lists when there are empty lines
  - The function of jumping to a new line supports Task
  - Optimized the function of selecting code blocks with Ctrl/Cmd+A, the first time will select the code content, the second time will select the entire code block (including \`\`\`)
  - Fixed the output of Debug information
- V5.5.4 2024年10月27日
  - 重构文档，使文档更简洁清晰
  - 增强删除功能添加功能开关，默认开启，可以到设置中关闭。
  - 增强删除功能：删除有序列表时，更新后续列表序号
  - 严格换行两次：支持代码块后回车换行两次。
- V5.5.3 2024年10月26日
  - 修复了代码块内删除空行时，删除列表代码块的 Bug
- V5.5.2 2024-10-26 增加了几个新的提升编辑体验的功能
  - 优化了空的列表项和引用项的删除功能，可以自行体验。
  - #252 添加了快捷键命令：跳转到新建行，默认快捷方式是 CMD/Ctrl+Enter，会与 Obsidian快捷键冲突，需要自己设置
  - #243 优化了代码块的粘贴功能，去除了冗余的智能缩进
  - #222 增加了切换注释命令（CMD/Ctrl+/），可以切换代码块和普通文本的注释（目前支持部分常用语言的代码块的注释），与Obsidian内置的注释功能快捷键冲突，需要自己设置快捷键。
    - 目前支持如下语言：
      - 'js': '//',
      - 'javascript': '//',
      - 'ts': '//',
      - 'typescript': '//',
      - 'py': '#',
      - 'python': '#',
      - 'rb': '#',
      - 'ruby': '#',
      - 'java': '//',
      - 'c': '//',
      - 'cpp': '//',
      - 'cs': '//',
      - 'go': '//',
      - 'rust': '//',
      - 'swift': '//',
      - 'kotlin': '//',
      - 'php': '//',
      - 'css': '//',
      - 'scss': '//',
      - 'sql': '--',
      - 'shell': '#',
      - 'bash': '#',
      - 'powershell': '#',
- V5.5.1 2024-09-15 Tabout 可以跳出行内成对符号包裹的文本
  - 增强 Tabout 功能，支持跳出行内成对符号包裹的文本，支持的符号对有：
    - ["【|】", "（|）", "《|》", "“|”", "‘|’", 
		   "「|」", "『|』", "'|'", "\"|\"", "$$|$$", '$|$', '__|__', '_|_',
			"==|==", "~~|~~", "**|**", '*|*', "[[|]]", '[|]',"{|}", "(|)", "<|>"];
  - 选中文本替换增强添加了对 `「『` 符号的支持
- V5.5.0 2024-07-28 自定义规则支持正则表达式匹配及多光标跳转，多语言支持
  - 重大更新（破坏性更新）
    - 自定义规则支持多光标跳转（参考了 Latex-Suite 代码），结合v5.4.0版本的更新，目前的自定义删除/转化规则支持正则表达式匹配及多光标跳转
    - 转化后字符串
      - 多光标用 `$n` 表示，n 为从 0 开始的整数，也可以使用 `${n: 文本}` 来表示文本被选中，Tab 键可以跳转到下一个光标
      - 自定义规则的正则匹配语法： `r/正则表达式1/|r/正则表达式2/`，这是光标左右都是正则表达式匹配的情况。
        - 也可以只有一边是正则表达式匹配，另一边是之前的匹配如： `！|r/\[\[.+?\]\]/`，可以匹配在 wiki 链接前输入全角叹号 `！` 的情况。
      - !! 不同于 V5.4.0 版本，现在不再用 `$n` 来引用正则表达式捕获的匹配组的内容，而是使用 `[[n]]` 来引用
        - `[[n]]`，匹配成功的第 `n` 组内容，`n` 是从 0 开始的自然数。
        - 对于 正则表达式 2 匹配的第 m 组内容，设置为 `[[m+n]]`，n 为第一个正则表达式匹配的组的数量。
        例子：自定义转换规则： 匹配 `r/(?<=^|\n)([\w-]+)-call/|`， 转换成 `> [![[0]]] $0\n> $1`，即可实现在行首输入 `note-call`，即可转换成
        ```
        > [!note] $0
        > $1
        ```
        其中， $0, $1 表示不同的两个光标，可以通过 Tab 键从 $0 跳转到 $1
        ![](/assets/multi-cursor.gif)
  
  - 其他更新
    - 增加多语言支持，目前支持了简体中文\繁体中文\英文\俄文， #234， Thanks to [niazlv](https://github.com/niazlv)
    - 修复自定义删除/转换规则 中的转义符无法转义 #240
    - 优化链接根据别名智能空格的效果 #233
    - 自定义正则表达式区域支持注释行, 以 // 开头的行被视为注释 #173

- V5.4.1 2024-06-30 小 Bug 修复与严格换行时回车的优化
  - 优化严格换行回车产生两个换行符的功能
    - 光标在行首且上一行与当前行非空的情况回车不处理。
    - 如下一行非空白行，不做处理
  - 修复 getDefaultIndentChar 在默认 Ob 设置下的会返回错误结果的问题, #229 #230 #231
- V5.4.0 2024-06-05 自定义规则支持正则表达式！
  - 转换前的匹配语法： `r/正则表达式1/|r/正则表达式2/`，这是光标左右都是正则表达式匹配的情况。
  - 也可以只有一边是正则表达式匹配，另一边是之前的匹配如： `！|r/\[\[.+?\]\]/`，可以匹配在 wiki 链接前输入全角叹号 `！` 的情况。
  - 对于转换后的字符串，在以前的功能基础上，还可以引用正则表达式匹配内的匹配组的内容（一般是正则表达式内小括号部分匹配成功的内容）
    - $n：匹配成功的第 `n` 组内容，`n` 是从 0 开始的自然数。
    - 对于 正则表达式 2 匹配的第 m 组内容，设置为 $(m+n)，n 为第一个正则表达式匹配的组的数量。

例如：自定义转换规则，匹配 `r/(?<=^|\n)(\w+)-call/|`，转换成 `> [!$0]\n> |`，可以实现在文章行首输入 `note-call`，即可转换成

```
> [!note]
> |
```

而在行首输入 `tip-call` 时，自动转换成

```
> [!tip]
> |
```

自定义删除规则匹配 `r/> \[![\w\d]+\].*?\n> /|`，即可实现快速删除空的 callout 块，如在如下情况下按删除会将整个 callout 全部删除

```
> [!note]
> |
```

- V5.3.4 2024-06-04 自定义删除/转换规则支持转义字符 #225
  - 可以在自定义删除/转换规则中使用转义字符 `\`，如 `\n` 是换行符。（支持`\n \r \t`）
  - 输入 `\|` 时不会被当作光标，转换后也只输出 `|` 的结果
- V5.3.3 2024-05-05 一些功能修复
  - 修复代码块粘贴某些情况智能缩进错误的问题
  - 修复中文输入法 IME 下，用户自定义规则在代码块中失效的问题
  - 优化代码块识别的功能，修复 CMD+A 某些情况的不精确选择问题
  - 修复 triggerPuncRectify 误触发导致的错误
  - 不再在时间戳左边添加软空格 #223
  - 使用 [obsidian-typings - npm package](https://www.npmjs.com/package/obsidian-typings) 来使用未公开的 Obsidian API。
- V5.3.2 2024-04-24 Small Fix
  - 修复：中文输入法下某些情况输入文字时转换规则不生效的问题 #221
- V5.3.1 2024-04-24 增加代码块编辑体验增强功能
  - 新功能：代码块编辑增强（可以在设置中切换关闭/打开）
    - 在代码块内，Cmd/Ctrl+A 会选中代码块
    - 增强代码块内的粘贴，会智能地缩进与删除多余空白符号
    - 增强列表下代码块内的删除按键，使光标始终在代码块有效区域
    - 增强代码块内Tab键的效果，Tab缩进的效果与编辑器设置中的使用制表符对应
    - 列表下代码块的创建和删除（此项始终开启，与设置开关无关）
  - 修复：中文输入法下如果回车或者数字键输入文字时转换规则不生效的问题 #221
- V5.3.0 2024-04-16 新的输入法检测方式
  - 采用新的输入法输入检测方式，可能能适配更多输入法
  - 修复 normal-paste #218
  - 修复代码块快速删除
- V5.2.3 2024-03-29 代码块编辑的一系列优化
  - 优化列表中空代码块的快速删除
  - 优化列表中代码块的快速创建（连按三次\`）
  - 优化代码块中 `Tab` 键的功能，会根据Obsidian编辑器设置中的使用制表符设置，插入制表符或者空格
  - 优化代码块中粘贴代码的表现，会智能判断缩进
  - 优化表格内编辑的格式化处理代码，更简洁
  - 解决有时候文档末尾创建新行时报错的问题
- v5.2.2 2024-03-17
  - 中英文间自动空格支持撤销（Ctrl+Z）, 撤销后继续输入不会影响原内容。
  - 以回车开头的自定义转换规则也会在文档首行生效
  - 解决删除多余空白行和格式化全文时解析语法树可能不完整的问题。
  - 修复格式化当前行的功能有时候只格式化行的前面部分内容的问题。
  - 修复标点与中文间空格有时候失效的问题
- v5.2.1 2024-03-10
  - 由于支持旧版输入法可能会导致其他输入法冲突，故为支持旧版输入法的功能添加了开关，默认为关闭。#202
  - 修复文字后不加空格输入`'`时会错误自动配对的问题。 #201
- v5.2.0 2024-02-28
  - 支持微软输入法
  - 解决表格编辑时有时变为非聚焦状态的问题
  - 标点配对功能默认增加了对英文标点的自动配对（相比与Obsidian内置的标点配对，本插件的配对输入和删除可以在表格编辑时生效）
- v5.1.16 2024-02-16
  - 支持latex公式`$\qquad$` 以及 `<br>`，他们前后不会添加空格 (#162，#195)
  - 调整自定义正则空格策略(-)的优先级到最高
  - 优化列表下的代码块创建和删除
  - 修改了表格内包含<br>时格式化的一个小bug
- v5.1.15 2024-01-27
  - 支持新版本 Obsidian1.5.3 表格内编辑的自动格式化，#189
  - 自定义选中文本增强增加了对……和——触发的支持。#191
- v5.1.14 2023-12-28
  - 新增实验性功能，可以修复 Obsidian 在 MacOS 中右键呼出右键菜单时光标会自动跳转到下一行的问题。修改该设置需要重启 Obsidian 生效
- v5.1.13 2023-12-28
  - fix #183, callout 内的代码块和非代码块区域能正确识别了
- v5.1.12 2023-12-11
  - Tabout 功能增加了选中文本被成对符号包裹时，按Tab会使光标直接跳出到符号的右边，具体成对符号为 `["【|】", "（|）", "《|》", "“|”", "‘|’", "「|」", "『|』", "'|'", "\"|\"", "$$|$$", '$|$', '__|__', '_|_', "==|==", "~~|~~", "**|**", '*|*', "[[|]]", '[|]',"{|}", "(|)", "<|>"]`
  - 支持 callout 中的代码块的识别，现在在 callout 代码块中输入不会导致错误的格式化了。 #151，感谢 [HoBeedzc](https://github.com/HoBeedzc) 提供的思路
  - 修复了对于单引号连续全角转半角功能失效的问题 #169
  - 修复了在某些输入法下，自定义规则对输入；的情况失效的问题 #169
- v5.1.11 2023-11-26
  - 连续全角转半角的功能：增加了连续输入两个全角竖线转半角竖线的规则 （#145， #113）
  - 基础输入增强：增加`！【【|`转`![[|]]`，修复了某些`¥¥|`不能转`$|$`的问题（win和Mac符号不同）。(#172,#170)
  - 现在以更好的方式读取obsidian的`strict line`设置，应该可以在移动端也可以识别~ （#133）
  - 修复了句子中某些分段后面的半角标点与后面的文本不空格的问题
  - 修复无别名当前页面链接的智能空格bug（#142）
  - merge pull request to fix formatArticle method fail because of hooking viewUpdate (#175, thanks to [eventlOwOp](https://github.com/eventlOwOp))
- v5.1.10 2023-07-09
  - 增加了命令：无格式化粘贴，默认快捷键 Ctrl(CMD)+Shift+V，在粘贴的时候不会触发自动格式化文本。
  - 优化了粘贴文本时自动格式化的功能
    - 修复了在白板中，粘贴多行文本会重复粘贴的 Bug.
    - 修复了粘贴时格式化数字和中文间空格的设置不生效的 Bug。
  - Added command: "Paste without formatting" with the default shortcut Ctrl(CMD)+Shift+V, which allows pasting text without triggering automatic text formatting.
  - Optimized automatic text formatting when pasting:
    - Fixed a bug where pasting multiple lines of text in the whiteboard would result in duplicate pasting.
    - Fixed a bug where the setting to format spaces between numbers and Chinese characters was not applied when pasting.
- v5.1.9 2023-02-23
  - 增加了实验性功能
    - 仅在输入过程中，中文间的英文标点（,.?!）自动转换为全角（可撤销）。该功能默认关闭，需要到设置中打开。
  - 一些改动
    - 将连续顿号转`/`的设定从默认的连续全角转半角功能中删除，需要该功能可通过设置中的自定义转换规则实现。 #127
    - 适配了前面带两个!的MD链接和 wiki 链接，为了适配Make.MD插件的 flow editor.
- v5.1.8 2023-02-11
  -  Bug fix
     -  fix cursor move when use command to format article. #126
     -  fix english number space settings not work.
     -  fix english number space and chinese number space sometimes not work.
- v5.1.7 2023-02-09
  - New Feature
    - Add Experimental Feature: Strict Line breaks Mode Enter Twice (when you turn on the strict line breaks in editor settings, one enter will produce two `\n`) 增加了实验性功能：在编辑器设置了严格换行的情况下，在普通文本行使用回车键会产生两个换行符。
    - Add Experimental Feature: Enhance Chinese Input Method （Which is designed to fix the issue #125）增加了实验性功能：中文输入法下输入英文，回车让英文上屏时自动格式化。
    - The experimental functionality needs to be updated and turned on in the plug-in settings, with the default off. 实验性功能需要更新后在插件设置中打开，默认为关闭。
- v5.1.6 2023-02-08
  - 插件命令正式支持中文，会根据数字OB设置的语言变化。 #116
  - 数字间的逗号和点号不再触发添加空格。 #121
  - ios端粘贴文本不会触发自动格式化了， #124
  - 设置中添加了数字和中文，数字和英文的空格选项 #117
  - 格式化全文、格式化选中文本产生的变化被整合到一个transaction，可以一次撤销。
- v5.1.5 2023-01-27
  - Bug fix
    - fix #119。修复选中文本后输入两次$时的结果与期望不同
  - Improvement
    - add chinese command name. 插件命令添加中文描述
    - improve delete blank line command for blockid 删除空白行不会删除blockid后的空白行了。
  - changed
    - no longger add soft space between timestamp and text. 自动格式化不再要求文本和识别的时间戳之间有软空格。
- v5.1.4 2023-01-18
  - Bug fix
    - Fix #114
  - Improve
    - 重新安装插件后无需重启软件即可生效。After reinstalling the plug-in, it will take effect without restarting the software.
  - Changed
    - 空格后面及句首的符号`.`不再被认为是句子的结束。（相当于不会错误地将文本中的拓展名如 `.txt` 自动格式化成 `. txt`，需要`.`前面有空格）The sign `.` after a space or at the beginning of a sentence is no longer considered the end of a sentence. (That is to say this plugin will not accidentally format the extension name in the text such as `.txt` to `. Txt` automatically, requiring `.` to be preceded by a space) 
- v5.1.3 2023-01-10
  - Bug fix
    - Fix #107
- v5.1.2 2022-12-29
  - Bug Fix
    - Fix dummy+soft link space strategy not work as expected
    - Improve timestamp recognize, now support 12:12:12, 1:22 ...
  - Changes
    - bad regexp notice now only appear when debug switch is on.
- v5.1.1 2022-12-12
  - Bug Fix
    - 修复了当前文件路径不更新导致的检查是否为排除文件总是返回真的问题。#105
- v5.1.0
  - New Feature
    - 增加了Tabout功能，可以在光标在行内代码中时按Tab跳出行内代码。Tabout inline code.
  - Improve
    - 修复了公式块在不规范书写的时候可能会导致后续部分自动格式化失效的问题。Fixed an issue where the automatic formatting could fail when the formula blocks were not properly written.
    - 用 syntaxTree 模块完全代替了自己的 ArticleParser 文章内容解析器。应该会带来性能的提升。The syntaxTree module completely replaces my own ArticleParser(article content parser). There should be a performance boost.
  - Other
    - 增加了 buymeacoffee 赞助链接. Add a fundingUrl of buymeacoffee.
- v5.0.12 2022.12.07
  - Improvement
    - 增强了一键去除空格命令(Easy Typing: Delete blank lines of the selected area or whole article)的逻辑，不再去除列表、callout后面的第一个空白行，以及水平线前的第一个空白行。(enhance command:delete blank line. no longer delete first blank line after list, task, callout and blank line exact before hr)
- v5.0.10 2022.11.07
  - bug fix
    - 修复转换规则在某些输入法下对中文符号 —— 不生效的 Bug。#96
  - enhancement
    - 增加行开头为有引号 “ 的文本的首字母大写。#97
- v5.0.9 2022.10.29
  - Bug Fix
    - 修复回车换行时的自动格式化在该行是列表或Task时失效的问题
    - 修复链接右边的智能空格不正确的问题
- v5.0.8 2022.10.29
  - Bug fix
    - 修复在关闭自动格式化时粘贴文本还会触发自动格式化的 Bug。Fix paste auto format when autoformat switch off
    - 尝试修复在某些输入法下，转换规则在输入全角字符时不生效的 Bug。Try to fix convert rule not work when input fullwidth symbol.
  - Inprovement
    - 现在选中替换规则的左右字符串可以为空。Now Selection Replace Rule's left and right char can be left blank.
- V5.0.7 2022.10.16
  - 结合 @codemirror/language SyntaxTree 来解析行，行解析更准确。 #57 #84。 parser line with help of @codemirror/language SyntaxTree, make it more robust.
- V5.0.6 2022.10.15
  - 修复上个版本的小更新导致的和 Latex suite 冲突的问题。
  - 修改一些设置面板的描述，和文档更新。
- V5.0.5 2022.10.14
  - 自动格式化会忽略 frontmatter 区域。 autoformat ignore frontmatter
  - 设置中增加自动格式化忽略文件、文件夹。support exclude folder/files for autoformat
  - 增加粘贴内容时的自动格式化。support autoformat when paste.
  - 增加删除多余空白行的命令（选中文本情况下只删除选中区域的空白行，未选中文本情况下对全文删除空白行）。add command to delete blank lines
  - <> 符号不再自动配对，如有需要可以在设置自定义规则实现。
- V5.0.4 2022.10.10
  - fix bug which cause conflict with obsidian-latex-suite
- V5.0.3 2022.10.05
  - 增加缩写的识别,缩写部分不被格式化(#48, #5)。 缩写指的是符合正则表达式 `/([a-zA-Z]\.)+/` 的部分，如 i.e.
  - 修复代码区块和公式区块类型改变时却没触发文档重解析的 bug。
- V5.0.1~V5.0.2 2022.10.03
  - 现在 * ~ 都会被认为是软空格. fix #41, now ~ * are considered as soft space
  - 自定义转换规则支持换行. User defined conversion rules now support line breaking.
- V5.0.0 2022.09.26
  - 重构了代码框架，使用新的接口重新实现了之前的所有功能，大大提升了本插件的性能及可拓展性，并且添加了一些新的功能。
  - 新功能与改进
  	- **增加了对移动端的支持**！
  	- **取消了行模式**，得益于新接口的使用，现在本插件能更好地识别出中文输入法的结束，无需行模式也不再会有之前的输入错乱的 Bug。现在，插件在每次中文输入结束和英文字符输入的时候进行文本的格式化。
  	- **增强了符号自动配对及增加了配对符号的快速删除功能**，光标在配对的符号之间时，按删除键会将整个配对符号全部删除，如在《|》时按删除键，会直接将两个书名号全部删除。支持更多符号对如：`“”`、`$$`、`（）` 等。
  	- 细化了对符号输入增强的功能分类并分别设置了开关：1. 符号自动配对/删除；2. 选中文本的符号编辑增强；3. 连续全角符号转半角符号；4. Obsidian 语法相关的编辑增强。详见 readme 文档。
  	- **增加了自定义编辑转换规则**，支持自定义选中文本、退格键删除文本以及打字时三种情况下的文本转换规则。（参考了 [aptend/typing-transformer-obsidian](https://github.com/aptend/typing-transformer-obsidian)）
  	- **增加了不同区块空格策略的设定**，三种空格策略：1. 无要求；2. 软空格；3. 严格空格。软空格指当前区块可以与其他区块以标点符号分割（如 `$formula-block$，文本区块` 中公式区块和文本区块以逗号分割，该逗号就算软空格），严格空格指该区块和其他区块之间必须有空格符号分割。
  	- 现在，**每个自定义区块左右两边的空格策略都可以单独设置**，大大增强了正则区块的实用性和可玩性。详见 readme 文档。
  	- 增加了一个插入代码块的命令: "insert code block w/wo selection"。可以在选中和未选中文本的情况下自适应地插入代码块语法（为了我自己方便）
  	- **提升了性能**。
  - 功能变化
  	- 由于使用 CodeMirror 6 API，**不再支持 Legacy Editor**。
  - 致谢
  	- 感谢插件 [aptend/typing-transformer-obsidian](https://github.com/aptend/typing-transformer-obsidian) ，通过该插件了解了CodeMirror6 的相关 API 的使用。以及该插件通用转换规则的思路也对本插件有所启发。
- V4.0.8 2022.09.05
  - Bug Fix
    - Auto-capitalization now work for cyrillic symbols #65
    - 调整了中文引号的自动补全 #64
    - 调整引号和其他区块的自动空格的特性。 #63
- V4.0.7 2022.08.23
  - Bug Fix
    - Fix Smart Space between text and link. #60
- V4.0.6 2022.04.27
  - Improvement
    - improve action when press 3 contiguous `·`。连续三次`·`的处理得到增强
  - Bug fix
    - fix press `{` when something selected will cause duplication. 修复在选中文本时按`{`会产生重复文本的问题。 #40
- V4.0.5 2022.04.06
  - Improvement
    - 全角字符增强功能：增加了中文括号、书名号、引号的自动配对输入。
    - 优化了插件设置面板
- V4.0.4 2022.03.27
  - Bug fix
    - 修复在 Ubuntu 下，全角增强开启下两次`：`不会变成`:`的 bug。
- V4.0.3 2022.03.27
  - New Feature
    - 新增了行模式：只在一行输入结束，回车创建新行的时候，对该行进行格式化。可以在插件设置中打开(Add LineMode: Only formatting when line end. need to be activated in setting pane)
  - Improvement
    - 增加了格式化全文的命令（add command to foramt the whole article）
    - format-selection 命令在没有选中文本的情况下，格式化当前行。（format-selection command will format current line when there is no selection）
  - Bug fix
    - 修复了链接后面错误添加空格的 bug。（fix bug: sometime it mistakenly add space after link）
    - 修复全角增强功能在 linux 下两次 `；`不会转换成 `;` 的 bug
  - Others
    - 建议在插件设置中的正则表达式设置中添加两行正则: 
      - `\[\!.*?\][+-]{0,1}` 用于排除对 Obsidian 0.14 版本后新增的 callout 类型的格式化 
      - `<.*?>` 用于排除 Templater 插件特定语法的格式化。
- V4.0.1 2022.02.21
  - Improvement
    - 全角字符增强，增加了对Mac系统下两次中文竖线变英文竖线的功能 #24
    - 全角字符增强，调整增强了对 》 以及 $ 的操作
- V4.0.0 2022.02.09 
    - Improvement
        - **同时支持 live preview 模式 (Support Live preview) 和 legacy editor**
        - 优化文本解析的时机和解析的范围，提升性能；在切换文档的时候重新解析文档。
        - 支持 Admonition 代码块内部文本自动格式化
        - 增加命令：格式化选中的文本
        - 增强了 `链接与文本智能空格` 的功能
        - 大大增强了 `全角字符输入增强/辅助` 功能
        - 回车后，对上一行文本进行格式化
    - Bug fix
        - 解决了某些情况下，格式化行时最终光标计算错误的 Bug。
        - 修复了解析全文时，在某些情况下在全文最后会多计算一行 undefined 的 Bug

---
- v3.4.3 2021.11.18
  - Bug fix
    - fix that two successive `：` will be converted to `:` not working in ubuntu;
- v3.4.2 2021.11.18
  - New feature
    - Add new feature to full-width symbol enhancement. Two successive `：` will be converted to `:`; two successive `》` will be converted to `>`; two successive `。` will be converted to `.`; two successive `、` will be converted to `/`; two successive `（` will be converted to `()`, and the cursor will be in the middle. It only works when you input, and it won't affect the existing context. 为全角符号增强添加新功能。 两个连续的`：`将被转换为`:`； 两个连续的`》`将被转换为`>`； 两个连续的`。`将被转换为`.`； 两个连续的`、`将被转换为`/`； 两个连续的`（`会被转换成`()`，光标会在中间。该功能只在你输入的时候触发，不会影响已经存在的文本。
- v3.4.1 2021.11.17
  - Improvement
    - Be compatible with plugins: Obsidian Emoji Shortcodes. 与插件 Obsidian Emoji Shortcodes 兼容。
- v3.4.0 2021.10.23
  - New feature
    - 全角字符增强功能增加了行首的`》`自动转换成`>`，行首的`、`自动转换成`/`（为了配合核心插件slash commands）。The full-width character enhancement has new feature: The `》` at the beginning of the line is automatically converted to `>`, and the `and` at the beginning of the line are automatically converted to `/` (in order to cooperate with the core plug-in slash commands) #17
  - Bug fix
    - 修复了鼠标点击到新的空白行首再输入时，句首字母大写失效的问题。Fixed an issue where capitalizing the first letter of a sentence would not work when clicking on the beginning of a blank line
- v3.3.5 2021.10.20
  - Bug fix
    - Try to fix #17 which happened on MacOS: 2 `￥` can't convert to `$$`。
- v3.3.4 2021.9.29
  - Improvement
    - 提升了对链接的识别，不带`https://` 的 www.开头的链接也能识别。Enhance the recognization for link, link not begin with `https://` but begin with `www.` can be recognized.
  - Changes
    - 全角字符增强的功能不再将中文省略号（中文输入法下`shift+6`）自动转化成`^`。The enhanced function of full-width characters no longer automatically converts Chinese ellipsis (`shift+6` under Chinese input method) into `^`.
- v3.3.3 2021.6.22
  - Change
    - 移除了分号后面的首字母大写，英文用法中分号后面不用大写。Remove capitalization after ";", for I had midsunderstood the use of ";" in English.
- v3.3.2 2021.6.20
  - bug fix
    - 修复了首字母大写在某些情况失效的bug. Fixed a bug where initial capitalization failed in some cases.
- v3.3.0 2021.6.19
  - Shinny new things
    - 首字母大写可撤销 Feature of capitalizing the first letter of every sentence is revocable now.
    - 增加了[[wikilink]]的智能空格选项，可以根据其上下文决定是否加空格。 Add setting for smart spacing for [[wikilink]], which decide whether to add spaces from the context.
  - Bug fix
    - 解决了之前格式化一行文本的命令不生效的bug。Fixed a bug where formatting a line of text doesn't work
- v3.2.2 2021.6.16
  - Improvement
    - 增加了对错误的自定义正则的处理，修复了空字符串的正则导致软件卡死的bug, 正则表达式功能应该没问题了。
    - 修改了formatLine的方式，只对一行中需要格式化的部分进行replaceRange，解决了一行中如果有%`-时每次格式化都需要重新解析全文的问题，提升了性能。
    - 全角字符增强的功能增加了输入……（shift+6）转换为^的功能。issue #10.
    - 修改了很多if-else，改成switch，略微提升性能
- v3.2.1 2021.6.10
  - Improvement
    - 增加了连续三次键入·，会变成\`\`\`
- v3.2.0 2021.6.10
  - Shiny new things
    - 增加了用户自定义正则表达式的功能，对正则表达式选取的部分不进行格式化。如`:\w*:`将识别emoji，并不会格式化其内部。`{{.*?}}`将识别双花括号部分，并对其内部不格式化。
    - 还可以选择自定义区块和其他文本区块之间空格。
  - Change
    - 合并了之前的 wikilink, mdlink, barelink，统称为link，相关的自动空格开关也合并为1个。
  - Others
    - 部分代码重新命名/注释，更加清晰
- v3.1.9 2021.6.9
  - Bug fix
    - 修复 v3.1.8 全角输入增强对 Mac 版本 obsidian无效的问题
- v3.1.8 2021.6.9
  - Improvement
    - 增加了全角符号输入增强，现在连续两个￥￥会变成$$，并将光标定位到中间，输入两个【会变成`[[cursor]]`，同理输入两个`·`会变成\`cursor\`
    - 重写了splitLine函数，改善逻辑，增加可维护性，并支持行内`$$block formula$$`的识别。  
    - readme 增加了对插件设置面板的说明
- v3.1.7 2021.6.7
  - Improvement
    - selectFormat 增加了选中文本时按【则在文本两边增加`[]`的效果.
    - 现在选中文本再【或者￥后，文本还保持选中
    - list或者task内部开头的整行公式(如`$$x+y=z$$`)现在也能被识别，不会导致错误的格式化。
- v3.1.6 2021.5.28
  - Improvement
    - 在设置项增加了Debug，可以在控制台输出调试信息，方便调试。
  - Bug fix
    - 修复光标定位新行时，prevCursor没更新导致的bug。
- v3.1.5 2021.5.28
  - Bug fix
    - 修复了在text类型的行编辑后，光标定位到codeblock内编辑情况下，format会对codeblock起作用的bug。
- v3.1.4 2021.5.26
  - Improvement
    - Reduce computatio: 不再在每次按键输入时解析全文，分析段的类型，而是在文本行数变化，或者在本文增减 `$- 这几个符号的时候重新解析全文的行类型。 
    - Effect change: 修改了数字空格选项的逻辑，不再在数字与字母之间空格。
  - Bugs fix
    - set `manifest.json`: `"isDesktopOnly": true`, Since I'm using the CodeMirror 5 API
    - remove unused imports
    - unhook events in `onunload()`
- v3.1.3 2021.5.16
  - bug fix
    - [x] 修复了标题首字母大写不生效的bug
    - [x] 修复了`[https://xxx]()` mdlink中方括号内部两边会自动生成空格的问题。 
- v3.1.2 2021.5.16
  - bug fix
    - [x] 文本和inline元素之间打空格回多添加一个空格, that won't happen again.
- v3.1.1 2021.5.15
  - Improve
  	- [x] 选中文本情况下，按中文的￥键，将自动替换成$，变成行内公式
  	- [x] 选中文本情况下，按中文的·，将自动替换成`，变成行内代码块
- v3.1.0 2021.5.14
  - Improve
    - **增加了全文的内容识别，在全文语境下的代码块和公式中不自动格式化**
    - 增加了快捷键：全文格式化
    - 增加了快捷键：AutoFormat 开关切换
    - Md 链接将不论小括号内容
- v3.0.1
  - bug fix
    - 修复了inline code 等元素和前后的标点符号空格的bug。
- v3.0.0
  - Improvement
    - **重构代码逻辑**，提升可维护性
    - 增强了行内公式和行内代码块的识别逻辑
    - 增加了多种链接的识别：wiki link, markdown link and bare link.
    - 增加了多种链接的自动空格功能开关
    - 开发了**光标位置计算算法**，大大提升了行内编辑的体验
- v2.3.1
  - bug fix
    - [x] 修复数字和后面的冒号自动空格的 bug
- v2.3.0
  - improvement
    - 增加了对obsidian 和 zotero 链接的识别（`obsidian://`, `zotero://`），链接内部不自动 format
  - Bug fix
    - 修复了对部分链接内部字符无法识别的bug
- v2.2.0
  - improvement
    - 去除部分冗余代码
    - 对main.ts中类重新命名
- v2.1.0
  - bugs fix    
    - 修复上个版本中链接在某些情况下还是会被格式化的bug
- v2.0.0
  - Improvement
    - 独立设置数字和英文文本，标点的空格，数字和`.`不空格
    - list，checkbox 中支持英文行首字母大写
    - 自动识别网址链接，不格式化网址链接部分内容
    - 识别 WikiLink 和 MarkDown link，不格式化其内容
    - 设置面板分类更加清晰
  - Bug fix
    - inline 元素的范围识别逻辑
- v1.0.0
  - 基本功能完成